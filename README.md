# sichuan_flutter# ğŸ€„ Koofy Sichuan (ì¿ í”¼ ì‚¬ì²œì„±)

Flutter ê¸°ë°˜ìœ¼ë¡œ ê°œë°œëœ ì§ë§ì¶”ê¸° í¼ì¦ ê²Œì„ **â€œì¿ í”¼ ì‚¬ì²œì„±â€** ì…ë‹ˆë‹¤.  
ì „í†µì ì¸ ì‚¬ì²œì„± ë£°ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë˜,  
í˜„ëŒ€ì ì¸ UI / ë­í‚¹ ì‹œìŠ¤í…œ / ìƒì  ê¸°ëŠ¥ì„ ê²°í•©í•œ ëª¨ë°”ì¼ í¼ì¦ ê²Œì„ì…ë‹ˆë‹¤.  

---

## ğŸ® ì£¼ìš” íŠ¹ì§•

### ğŸ”¹ ê²Œì„ ì‹œìŠ¤í…œ
- **ê°€ë¡œí˜• í¼ì¦ êµ¬ì¡° (14 Ã— 10 ê¸°ë³¸ ë³´ë“œ)**
- **ë¡œì»¬ ì €ì¥ ê¸°ë°˜** (ì¸í„°ë„· ì—°ê²° ì—†ì´ í”Œë ˆì´ ê°€ëŠ¥)
- **ë‹¤ì¸µ(2~3ë‹¨) ë³´ë“œ ì§€ì› ì˜ˆì •**
- **ì‹œê°„ ì œí•œ, íŒíŠ¸, í­íƒ„, ì„ê¸° ë“± ë‹¤ì–‘í•œ ì•„ì´í…œ**
- **ì—ë„ˆì§€ í•˜íŠ¸(ìµœëŒ€ 4ê°œ) ì‹œìŠ¤í…œ**

### ğŸ”¹ ì „ì—­ ê´€ë¦¬
- ì „ì—­ ì„¤ì • (ì–¸ì–´, ì‚¬ìš´ë“œ, í…Œë§ˆ, ë‚œì´ë„)
- SharedPreferences ê¸°ë°˜ ë¡œì»¬ ì €ì¥
- Flame + Provider ì¡°í•©ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬

### ğŸ”¹ ì•„ì´í…œ ì‹œìŠ¤í…œ
| ì•„ì´í…œ | ì„¤ëª… | ê¸°ë³¸ ì œê³µ | êµ¬ë§¤ ë°©ì‹ |
|---------|-------|-------------|-------------|
| ğŸ’¡ íŒíŠ¸ | ì—°ê²° ê°€ëŠ¥í•œ ë¸”ë¡ì„ ê¹œë¹¡ì„ìœ¼ë¡œ í‘œì‹œ | 3ê°œ | ê³¨ë“œ êµ¬ë§¤ |
| ğŸ’£ í­íƒ„ | ê°™ì€ ê·¸ë¦¼ì˜ ë¸”ë¡ì„ ì§ì ‘ í„°ì¹˜ë¡œ ì œê±° | 2ê°œ | ê³¨ë“œ êµ¬ë§¤ |
| ğŸ”„ ì„ê¸° | ì „ì²´ ë¸”ë¡ì„ ëœë¤ ì¬ë°°ì¹˜ | 2íšŒ | ê³¨ë“œ êµ¬ë§¤ |

---

## ğŸª ìƒì  ì‹œìŠ¤í…œ

| ë¶„ë¥˜ | ì„¤ëª… | êµ¬ë§¤ ìˆ˜ë‹¨ |
|------|------|------------|
| ğŸ­ ìºë¦­í„° | í”Œë ˆì´ ì¤‘ ë°˜ì‘(ê¸°ì¨/ìŠ¬í””/ê³ ë¯¼ ë“±) ì• ë‹ˆë©”ì´ì…˜ | ê³¨ë“œ / ë³´ì„ |
| ğŸ§© ë¸”ëŸ­ ìŠ¤í‚¨ | ê³¼ì¼ / ë™ë¬¼ / ë§ˆì‘ ìŠ¤íƒ€ì¼ ë“± í…Œë§ˆë³„ ë¸”ëŸ­ | ê³¨ë“œ / ë³´ì„ |
| ğŸŒ„ ë°°ê²½ | ê²Œì„ ë°°ê²½ ì´ë¯¸ì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§• | ê³¨ë“œ / ë³´ì„ |

- **ê³¨ë“œ:** ìŠ¤í…Œì´ì§€ í´ë¦¬ì–´ ë˜ëŠ” ê´‘ê³  ë³´ìƒìœ¼ë¡œ íšë“  
- **ë³´ì„:** ìŠ¤í…Œì´ì§€ ë³´ìƒ ë˜ëŠ” ì¸ì•± êµ¬ë§¤ë¡œ íšë“  

---

## ğŸ† ë­í‚¹ ì‹œìŠ¤í…œ (Firebase ê¸°ë°˜)

Firebase Firestoreë¥¼ ì´ìš©í•˜ì—¬ ë­í‚¹ê³¼ í´ë¦¬ì–´ ê¸°ë¡ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.  

| í•­ëª© | ì„¤ëª… |
|------|------|
| ìŠ¤í…Œì´ì§€ | ìŠ¤í…Œì´ì§€ ë²ˆí˜¸ (Stage ID) |
| ì•„ì´ë”” | Google / Guest ë¡œê·¸ì¸ ê¸°ë°˜ ì‚¬ìš©ì |
| í´ë¦¬ì–´ ì‹œê°„ | ì´ˆ ë‹¨ìœ„ í´ë¦¬ì–´ ê¸°ë¡ |
| í‹€ë¦° íšŸìˆ˜ | ì˜ëª»ëœ ë§¤ì¹­ ì‹œë„ íšŸìˆ˜ |
| íŒíŠ¸ ì‚¬ìš© íšŸìˆ˜ | íŒíŠ¸ ì•„ì´í…œ ì‚¬ìš© íšŸìˆ˜ |
| í­íƒ„ ì‚¬ìš© íšŸìˆ˜ | í­íƒ„ ì•„ì´í…œ ì‚¬ìš© íšŸìˆ˜ |
| ì„ê¸° ì‚¬ìš© íšŸìˆ˜ | ë˜ëŒë¦¬ê¸°(Shuffle) ì•„ì´í…œ ì‚¬ìš© íšŸìˆ˜ |

- Google ë¡œê·¸ì¸ / ê²ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ ì§€ì›  
- ì˜¤í”„ë¼ì¸ ê¸°ë¡ì€ ë¡œì»¬ì— ì €ì¥ í›„ ì˜¨ë¼ì¸ ì‹œ ìë™ ë™ê¸°í™”  

---

## â˜ï¸ Firebase êµ¬ì¡°

| ì»¬ë ‰ì…˜ | ì„¤ëª… |
|---------|------|
| `users` | ìœ ì € ê¸°ë³¸ ì •ë³´ (ë‹‰ë„¤ì„, ì¬í™”, ì•„ì´í…œ ìˆ˜ëŸ‰ ë“±) |
| `records` | ìŠ¤í…Œì´ì§€ë³„ í´ë¦¬ì–´ ê¸°ë¡ ë° ë­í‚¹ ì •ë³´ |
| `stages` | ê° ìŠ¤í…Œì´ì§€ì˜ ë‚œì´ë„, ë ˆì´ì•„ì›ƒ, ì¥ì• ë¬¼ ì •ë³´ |
| `shop_items` | ìƒì  í’ˆëª© ì •ì˜ (ìºë¦­í„°, ë¸”ëŸ­, ë°°ê²½ ë“±) |
| `purchases` | ìœ ì € êµ¬ë§¤ ë‚´ì—­ ì €ì¥ |

---

## ğŸ§  í–¥í›„ ì—…ë°ì´íŠ¸ ì˜ˆì •
- ì¹œêµ¬ ì´ˆëŒ€ / ì¹œêµ¬ ë­í‚¹ ê¸°ëŠ¥  
- ë¦¬ì–¼íƒ€ì„ ëŒ€ì „ (íƒ€ì„ì–´íƒ ëª¨ë“œ)  
- ì‹œì¦Œë³„ í•œì • í…Œë§ˆ ë¸”ëŸ­  
- í”Œë ˆì´ ë°ì´í„° í´ë¼ìš°ë“œ ë°±ì—…  

---

## âš™ï¸ ê°œë°œ í™˜ê²½

| í•­ëª© | ë²„ì „ |
|------|------|
| Flutter SDK | 3.9.2 |
| Dart SDK | 3.9.x |
| Flame | ^1.32.0 |
| Flame Audio | ^2.11.10 |
| Google Mobile Ads | ^6.0.0 |
| Shared Preferences | ^2.5.3 |
| Provider | ^6.1.5+1 |
| Firebase (Firestore/Auth) | ìµœì‹  ì•ˆì • ë²„ì „ |

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

```bash
# 1. í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/choenamho/sichuan_flutter.git
cd sichuan_flutter

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
flutter pub get

# 3. ì‹¤í–‰ (ë””ë°”ì´ìŠ¤ ì—°ê²° í›„)
flutter run

lib/
 â”œâ”€ main.dart
 â”œâ”€ config/
 â”‚   â”œâ”€ localization_manager.dart
 â”‚   â”œâ”€ settings_manager.dart
 â”‚   â””â”€ constants.dart
 â”œâ”€ storage/
 â”‚   â””â”€ local_storage.dart
 â”œâ”€ audio/
 â”‚   â””â”€ audio_manager.dart
 â”œâ”€ controllers/
 â”‚   â”œâ”€ game_controller.dart
 â”‚   â”œâ”€ board_controller.dart
 â”‚   â””â”€ ...
 â”œâ”€ ui/
 â”‚   â”œâ”€ home_screen.dart
 â”‚   â”œâ”€ game_screen.dart
 â”‚   â””â”€ result_screen.dart
 â””â”€ game/
     â”œâ”€ sichuan_game.dart
     â”œâ”€ tile_model.dart
     â””â”€ board_manager.dart

ğŸ§© ë¼ì´ì„ ìŠ¤

ë³¸ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ ê°œë°œìš©/ì—°ìŠµìš©ìœ¼ë¡œ ì œì‘ë˜ì—ˆìœ¼ë©°,
ìƒì—…ì  ë°°í¬ ì „ì—ëŠ” ë°˜ë“œì‹œ ë¼ì´ì„ ìŠ¤ ì •ì±…ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

â¸»

ğŸ‘¤ Author

NamHo (LaonCode / Koofy Games)
	â€¢	GitHub: @choenamho
	â€¢	Brand: Koofy Games
	â€¢	Email: laoncode.dev@gmail.com


# ğŸ§± Firebase Firestore ìŠ¤í‚¤ë§ˆ â€” Koofy Sichuan (ì‚¬ì²œì„±)

---

## ğŸ‘¤ Collection: `users`

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `uid` | string | Firebase Auth ì‚¬ìš©ì ê³ ìœ  ID | `"8aYtL3sd..."` |
| `nickname` | string | ì‚¬ìš©ì í‘œì‹œëª… | `"ë¼ì˜¨"` |
| `email` | string | ë¡œê·¸ì¸í•œ ì´ë©”ì¼ (ê²ŒìŠ¤íŠ¸ëŠ” placeholder) | `"guest@koofy.games"` |
| `login_type` | string | `"google"` / `"guest"` | `"google"` |
| `created_at` | timestamp | ê°€ì… ì‹œê° | `"2025-10-07T13:00:00Z"` |
| `last_login` | timestamp | ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê° | `"2025-10-07T14:21:10Z"` |
| `gold` | int | ë³´ìœ  ê³¨ë“œ | `1500` |
| `gems` | int | ë³´ìœ  ë³´ì„ | `12` |
| `hearts` | int | í•˜íŠ¸ ìˆ˜ (ì—ë„ˆì§€ ê°œë…) | `4` |
| `hints` | int | íŒíŠ¸ ì•„ì´í…œ ê°œìˆ˜ | `3` |
| `bombs` | int | í­íƒ„ ì•„ì´í…œ ê°œìˆ˜ | `2` |
| `shuffle` | int | ì„ê¸° ì•„ì´í…œ ê°œìˆ˜ | `2` |
| `current_stage` | int | í˜„ì¬ í´ë¦¬ì–´ ìŠ¤í…Œì´ì§€ ë²ˆí˜¸ | `8` |

> ğŸ”¹ ì´ë©”ì¼ì€ ì‚¬ìš©ìê°€ ì…ë ¥í•˜ì§€ ì•Šê³ , **Firebase Auth ìë™ ì œê³µ**  
> ğŸ”¹ ê²ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ì€ `guest@koofy.games` ìœ¼ë¡œ ì €ì¥  

---

## ğŸ§© Collection: `records` (ë­í‚¹/ê¸°ë¡)

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `uid` | string | ì‚¬ìš©ì ID (users.uid ì°¸ì¡°) | `"8aYtL3sd..."` |
| `stage_id` | string | í”Œë ˆì´í•œ ìŠ¤í…Œì´ì§€ ID | `"stage_10"` |
| `clear_time` | int | í´ë¦¬ì–´ ì‹œê°„ (ì´ˆ ë‹¨ìœ„) | `85` |
| `mistake_count` | int | í‹€ë¦° íšŸìˆ˜ | `2` |
| `hint_used` | int | íŒíŠ¸ ì‚¬ìš© íšŸìˆ˜ | `1` |
| `bomb_used` | int | í­íƒ„ ì‚¬ìš© íšŸìˆ˜ | `0` |
| `shuffle_used` | int | ì„ê¸° ì‚¬ìš© íšŸìˆ˜ | `1` |
| `score` | int | ìµœì¢… ì ìˆ˜ | `920` |
| `rank` | int | ë­í‚¹ ìˆœìœ„ | `7` |
| `created_at` | timestamp | ê¸°ë¡ ì €ì¥ ì‹œê° | `"2025-10-07T14:32:00Z"` |

---

## ğŸ—ºï¸ Collection: `stages`

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `stage_id` | string | ìŠ¤í…Œì´ì§€ ID | `"stage_10"` |
| `difficulty` | string | `"easy"`, `"normal"`, `"hard"` | `"normal"` |
| `layer_count` | int | ë‹¨ ìˆ˜ (ì¸µ ìˆ˜) | `2` |
| `tile_rows` | int | ê°€ë¡œ ì¹¸ ìˆ˜ | `10` |
| `tile_cols` | int | ì„¸ë¡œ ì¹¸ ìˆ˜ | `14` |
| `orientation` | string | `"portrait"` | `"portrait"` |
| `tile_set` | string | `"fruit"`, `"animal"`, `"mahjong"` | `"fruit"` |
| `initial_map` | map / json | ì´ˆê¸° íƒ€ì¼ ë°°ì—´ ì •ì˜ (optional) | `{ "0,0": "apple", "0,1": "pear" }` |
| `obstacles` | array | ì¥ì• ë¬¼ ì¢Œí‘œ | `[{"x":4,"y":2}, {"x":7,"y":8}]` |
| `flipped_tiles` | array | ë’¤ì§‘íŒ íƒ€ì¼ ì¢Œí‘œ | `[{"x":1,"y":2}]` |
| `created_at` | timestamp | ë“±ë¡ ì‹œê° | `"2025-10-07T13:00:00Z"` |

> ğŸ”¹ ì„¸ë¡œí˜• ê¸°ë³¸ êµ¬ì¡°: **10 Ã— 14**, `orientation = "portrait"`  
> ğŸ”¹ ê°€ë¡œí˜• í™•ì¥ ì‹œ `"landscape"` ë¡œ ì¶”ê°€ ê°€ëŠ¥  

---

## ğŸª Collection: `shop_items`

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `item_id` | string | ì•„ì´í…œ ID | `"char_fox"` |
| `category` | string | `"character"`, `"tile"`, `"background"` | `"character"` |
| `name` | string | ì•„ì´í…œëª… | `"ì—¬ìš° ìºë¦­í„°"` |
| `description` | string | ì„¤ëª… | `"ê¸°ë»í•˜ë©° ê¼¬ë¦¬ë¥¼ í”ë“œëŠ” ì—¬ìš°"` |
| `price_gold` | int | ê³¨ë“œ ê°€ê²© | `1000` |
| `price_gem` | int | ë³´ì„ ê°€ê²© | `2` |
| `image_url` | string | Firebase Storage URL | `"https://firebasestorage..."` |
| `rarity` | string | `"normal"`, `"rare"`, `"epic"` | `"rare"` |
| `animation_type` | string | `"happy"`, `"sad"`, `"thinking"` | `"happy"` |
| `created_at` | timestamp | ë“±ë¡ ì‹œê° | `"2025-10-07T13:00:00Z"` |

---

## âš™ï¸ Collection: `settings_global`

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| `latest_version` | string | ìµœì‹  ì•± ë²„ì „ | `"1.0.0+10"` |
| `maintenance_mode` | bool | ì ê²€ ì—¬ë¶€ | `false` |
| `notice_message` | string | ê³µì§€ ë‚´ìš© | `"ìƒˆë¡œìš´ ìºë¦­í„° ì—…ë°ì´íŠ¸!"` |
| `ad_reward_config` | map | ê´‘ê³  ë³´ìƒ ì„¤ì • | `{ "gold": 100, "gems": 1 }` |

---

## ğŸ”— ê´€ê³„ ìš”ì•½

- `users.uid` â†” `records.uid` : 1:N  
- `records.stage_id` â†” `stages.stage_id` : 1:N  
- `users` â†” `shop_items` : êµ¬ë§¤ ì´ë ¥ í™•ì¥ ê°€ëŠ¥ (`purchases` ì»¬ë ‰ì…˜)

---

## ğŸ“Š ì¸ë±ìŠ¤ ê¶Œì¥

| ì¸ë±ìŠ¤ | ëª©ì  |
|---------|------|
| `records (stage_id, score DESC)` | ìŠ¤í…Œì´ì§€ë³„ ë­í‚¹ ì¡°íšŒ |
| `users (gold DESC)` | ìƒìœ„ ë³´ìœ ì ì¡°íšŒ |
| `records (uid, stage_id)` | ìœ ì €ë³„ ì§„í–‰ë„ ì¡°íšŒ |

---